
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Recarra | Instant AI Car Offer</title>
  <style>
    body {
      font-family: 'Poppins', sans-serif;
      margin: 0;
      background: #f2f2f2;
      color: #000;
    }
    .centered {
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      height: 100vh;
      text-align: center;
    }
    .input-field {
      width: 90%;
      max-width: 400px;
      padding: 0.75rem;
      margin: 1rem auto;
      font-size: 1rem;
      border: 2px solid #ccc;
      border-radius: 12px;
      display: block;
    }
    .button {
      padding: 0.75rem 1.5rem;
      margin: 1rem auto;
      font-size: 1rem;
      font-weight: bold;
      border-radius: 30px;
      border: none;
      cursor: pointer;
      display: block;
    }
    .button-gradient {
      background: linear-gradient(to right, #ff3c3c, #f9d423);
      color: black;
    }
    .chat-button {
      background: #ff3c3c;
      color: white;
      position: fixed;
      bottom: 30px;
      right: 20px;
      z-index: 9999;
      box-shadow: 0 4px 12px rgba(0,0,0,0.2);
    }
    #toast {
      display: none;
      position: fixed;
      bottom: 40px;
      left: 50%;
      transform: translateX(-50%);
      background: #28a745;
      color: white;
      padding: 0.8rem 1.5rem;
      border-radius: 30px;
      font-weight: bold;
      box-shadow: 0 4px 12px rgba(0,0,0,0.2);
      z-index: 9999;
    }
    section.card {
      background: white;
      border-radius: 12px;
      padding: 2rem;
      margin: 2rem auto;
      max-width: 700px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.1);
      text-align: center;
    }
  </style>
</head>
<body>

<!-- Splash Screen -->
<div id="splash" class="centered" style="background:black; color:white;">
  <h1>Welcome to Recarra</h1>
  <p>Smart AI Car Offers in Seconds</p>
  <button class="button button-gradient" onclick="startApp()">Get Started</button>
</div>

<!-- Smart Form Section -->
<section id="smart-form" class="card" style="display:none;">
  <h2>AI Recarra Instant Offer</h2>
  <input class="input-field" id="car-year" placeholder="Vehicle Year" />
  <input class="input-field" id="car-make" placeholder="Vehicle Make" />
  <input class="input-field" id="car-model" placeholder="Vehicle Model" />
  <input class="input-field" id="full-name" placeholder="Full Name" />
  <input class="input-field" id="phone" placeholder="Mobile Number" />
  <input class="input-field" id="email" placeholder="Email Address" />
  <button class="button button-gradient" id="submitOfferBtn">Submit Offer</button>
</section>

<!-- Confirmation -->
<section id="submission-confirmation" class="card" style="display:none;">
  <h2>Thank you! Your offer has been received.</h2>
  <p>Offer ID: <strong id="final-offer-id">RC-000000</strong></p>
  <p>Estimated Offer: <strong id="offer-value">$0</strong></p>
  <button class="button button-gradient" onclick="copyOfferId()">Copy Offer ID</button>
  <button class="button" style="background:#007bff; color:white;" onclick="restartOffer()">Submit Another Offer</button>
</section>

<!-- Guaranteed Upgrade -->
<section id="guaranteed-upgrade" class="card" style="display:none; background:#e3f2fd; border:2px solid #64b5f6;">
  <h3>Upgrade to a Guaranteed Offer</h3>
  <input type="file" id="vin-photo" accept="image/*" class="input-field" />
  <input type="text" id="pickup-zip" placeholder="Pickup ZIP Code" class="input-field" />
  <input type="datetime-local" id="pickup-time" class="input-field" />
  <button class="button" style="background:#1976d2; color:white;" onclick="submitGuaranteedOffer()">Submit Upgrade</button>
</section>

<!-- Chat Bubble -->
<div id="chat-bubble" class="chat-button" onclick="startChatFollowUp()" style="display:none;">Chat Now</div>

<!-- Toast -->
<div id="toast">Offer ID copied!</div>

<script>
function startApp() {
  document.getElementById('splash').style.display = 'none';
  document.getElementById('smart-form').style.display = 'block';
}

function calculateOffer() {
  return Math.min(888, 300 + Math.floor(Math.random() * 500));
}

function copyOfferId() {
  const id = document.getElementById("final-offer-id").textContent;
  navigator.clipboard.writeText(id).then(() => {
    const toast = document.getElementById("toast");
    toast.style.display = "block";
    setTimeout(() => toast.style.display = "none", 2000);
  });
}

function restartOffer() {
  document.getElementById("submission-confirmation").style.display = "none";
  document.getElementById("guaranteed-upgrade").style.display = "none";
  document.getElementById("chat-bubble").style.display = "none";
  document.getElementById("smart-form").style.display = "block";
}

function startChatFollowUp() {
  const id = window.latestOfferId || "Unknown";
  alert("Let's finish your quote for Offer ID: " + id);
  const fileInput = document.createElement("input");
  fileInput.type = "file";
  fileInput.accept = "image/*";
  fileInput.onchange = () => {
    const file = fileInput.files[0];
    if (file) alert("Photo uploaded: " + file.name);
  };
  fileInput.click();
  const time = prompt("Preferred pickup time?");
  console.log("Chat Follow-up:", { id, time });
}

document.getElementById("submitOfferBtn").addEventListener("click", () => {
  const offerId = "RC-" + Date.now().toString().slice(-6);
  const estimatedValue = calculateOffer();
  document.getElementById("final-offer-id").textContent = offerId;
  document.getElementById("offer-value").textContent = "$" + estimatedValue;
  document.getElementById("smart-form").style.display = "none";
  document.getElementById("submission-confirmation").style.display = "block";
  document.getElementById("guaranteed-upgrade").style.display = "block";
  document.getElementById("chat-bubble").style.display = "block";
  window.latestOfferId = offerId;

  const offerData = {
    offerId,
    estimatedValue,
    year: document.getElementById("car-year").value,
    make: document.getElementById("car-make").value,
    model: document.getElementById("car-model").value,
    fullName: document.getElementById("full-name").value,
    phone: document.getElementById("phone").value,
    email: document.getElementById("email").value,
    date: new Date().toISOString()
  };

  fetch("https://your-api.recarra.com/save-offer", {
    method: "POST",
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify(offerData)
  }).catch(err => console.warn("Backend not connected:", err));
});

function submitGuaranteedOffer() {
  const photo = document.getElementById("vin-photo").files[0];
  const zip = document.getElementById("pickup-zip").value;
  const time = document.getElementById("pickup-time").value;
  alert("Guaranteed Offer submitted with photo: " + (photo?.name || "none"));
  console.log("Guaranteed Upgrade:", { offerId: window.latestOfferId, zip, time, photo });
}
</script>

</body>
</html>
